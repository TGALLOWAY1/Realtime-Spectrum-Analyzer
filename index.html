<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Spectrum Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-center">Real-Time Spectrum Analyzer</h1>
        </header>

        <main>
            <!-- Canvas Section -->
            <div class="mb-6 bg-gray-800 rounded-lg p-4 shadow-lg">
                <canvas 
                    id="rta-canvas" 
                    class="w-full bg-gray-950 rounded"
                    width="800" 
                    height="400"
                ></canvas>
            </div>

            <!-- Energy Density Bands Section -->
            <div class="mb-6 bg-gray-800 rounded-lg p-4 shadow-lg">
                <canvas 
                    id="band-visualizer-canvas" 
                    class="w-full bg-gray-950 rounded"
                    width="800" 
                    height="150"
                ></canvas>
            </div>

            <!-- Oscilloscope Section -->
            <div class="mb-6 bg-gray-800 rounded-lg p-4 shadow-lg">
                <canvas 
                    id="oscilloscope-canvas" 
                    class="w-full bg-gray-950 rounded"
                    width="800" 
                    height="200"
                ></canvas>
            </div>

            <!-- Controls Section -->
            <div class="bg-gray-800 rounded-lg p-6 shadow-lg">
                <div class="flex flex-col md:flex-row gap-6 items-center justify-center">
                    <!-- Audio Source Dropdown -->
                    <div class="flex flex-col gap-2 min-w-[200px]">
                        <label for="audio-source" class="text-sm font-medium text-gray-300">
                            Audio Source
                        </label>
                        <select 
                            id="audio-source" 
                            class="bg-gray-700 text-gray-100 border border-gray-600 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        >
                            <option value="TEST AUDIO/D#m - 140BPM - Triple M v3.wav">
                                D#m - 140BPM - Triple M v3 (WAV)
                            </option>
                            <option value="TEST AUDIO/D#m - 140BPM - Triple M v3.mp3">
                                D#m - 140BPM - Triple M v3 (MP3)
                            </option>
                        </select>
                    </div>

                    <!-- Play/Pause Button -->
                    <div class="flex flex-col gap-2">
                        <label class="text-sm font-medium text-gray-300 opacity-0">
                            Control
                        </label>
                        <button 
                            id="play-pause-btn" 
                            class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"
                        >
                            Play
                        </button>
                    </div>

                    <!-- Smoothing Slider -->
                    <div class="flex flex-col gap-2 flex-1 min-w-[200px] max-w-md">
                        <label for="smoothing-slider" class="text-sm font-medium text-gray-300">
                            Smoothing: <span id="smoothing-value">50</span>%
                        </label>
                        <input 
                            type="range" 
                            id="smoothing-slider" 
                            min="0" 
                            max="100" 
                            value="50" 
                            class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"
                        />
                    </div>

                    <!-- View Length Dropdown -->
                    <div class="flex flex-col gap-2 min-w-[150px]">
                        <label for="view-length" class="text-sm font-medium text-gray-300">
                            View Length
                        </label>
                        <select 
                            id="view-length" 
                            class="bg-gray-700 text-gray-100 border border-gray-600 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        >
                            <option value="1">1 Bar</option>
                            <option value="4" selected>4 Bars</option>
                            <option value="8">8 Bars</option>
                        </select>
                    </div>

                    <!-- Decay Speed Slider -->
                    <div class="flex flex-col gap-2 flex-1 min-w-[200px] max-w-md">
                        <label for="decay-speed-slider" class="text-sm font-medium text-gray-300">
                            Decay Speed: <span id="decay-speed-value">1.00</span>x
                        </label>
                        <input 
                            type="range" 
                            id="decay-speed-slider" 
                            min="0.25" 
                            max="2.0" 
                            step="0.05" 
                            value="1.0" 
                            class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"
                        />
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script type="module" src="./main.js"></script>
    
    <!-- Band Tooltip - Fixed position for guaranteed visibility -->
    <div
        id="bandTooltip"
        style="
            position: fixed;
            pointer-events: none;
            padding: 4px 8px;
            border-radius: 4px;
            background: rgba(15, 23, 42, 0.95);
            color: #fefce8;
            font-size: 11px;
            line-height: 1.3;
            display: none;
            z-index: 9999;
            border: 1px solid #facc15;
            white-space: nowrap;
        "
    ></div>
</body>
</html>

